{#
Macros UI padronizadas para uso em templates.
Importar: {% from 'macros/ui_macros.html' import render_status_badge %}
#}

{# Renderiza badge de status com cores consistentes #}
{% macro render_status_badge(status_text) %}
{% set status = status_text|lower if status_text else '' %}
{% set badge_class = 'bg-secondary' %}

{%- if status in ['novo', 'aberto'] -%}
{% set badge_class = 'bg-primary' %}
{%- elif status in ['em andamento', 'execução', 'execucao', 'pendente'] -%}
{% set badge_class = 'bg-warning text-dark' %}
{%- elif status in ['concluído', 'concluido', 'finalizado', 'pago', 'aprovado', 'spare', 'ativo'] -%}
{% set badge_class = 'bg-success' %}
{%- elif status in ['cancelado', 'reprovado', 'erro', 'recusado', 'inativo'] -%}
{% set badge_class = 'bg-danger' %}
{%- endif -%}

<span class="badge {{ badge_class }}">{{ status_text }}</span>
{% endmacro %}

{# Renderiza navegação breadcrumb #}
{% macro render_breadcrumb(items) %}
<nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb mb-0">
        {% for item in items %}
        {% if loop.last %}
        <li class="breadcrumb-item active" aria-current="page">{{ item.label }}</li>
        {% else %}
        <li class="breadcrumb-item"><a href="{{ item.href }}" class="text-decoration-none">{{ item.label }}</a></li>
        {% endif %}
        {% endfor %}
    </ol>
</nav>
{% endmacro %}

{# Renderiza badge de pagamento #}
{% macro render_payment_badge(is_paid) %}
{% if is_paid %}
<span class="badge bg-success"><i class="bi bi-check-circle me-1"></i>Pago</span>
{% else %}
<span class="badge bg-warning text-dark"><i class="bi bi-clock me-1"></i>Pendente</span>
{% endif %}
{% endmacro %}

{# Formata valor monetário #}
{% macro money(value, prefix='R$ ') %}
{{ prefix }}{{ "%.2f"|format(value|float if value else 0) }}
{% endmacro %}

{# Célula de ações com espaçamento padronizado #}
{% macro action_cell() %}
<td class="cell-actions">{{ caller() }}</td>
{% endmacro %}

{# Estado vazio para tabelas/listas sem dados #}
{% macro render_empty_state(message, icon='bi-inbox', cta_text=None, cta_url=None) %}
<div class="empty-state text-center py-5">
    <i class="bi {{ icon }} display-1 text-muted opacity-50"></i>
    <h4 class="mt-4 text-muted fw-bold">{{ message }}</h4>
    {% if cta_text and cta_url %}
    <a href="{{ cta_url }}" class="btn btn-primary btn-lg mt-3">
        <i class="bi bi-plus-lg me-1"></i>{{ cta_text }}
    </a>
    {% endif %}
</div>
{% endmacro %}